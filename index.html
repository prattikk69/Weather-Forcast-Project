<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forcast</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Roboto&display=swap" rel="stylesheet">
    <meta name="keywords" content="Prattikk">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
    <link rel="manifest" href="favicon_io/site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <nav>
        <div class="logo">
            <i class="fa-solid fa-temperature-half"></i>
            Get Weather
        </div>
    </nav>
    <div class="container">
        <p>This Weather appliaction is not accurate, it was made for API practice only. <br>
        <strong> <i class="fa-solid fa-circle-exclamation"></i>
            Please check other real Weather forcasting apks for accurate results.</strong></p>
        <hr>

        <div class="wrapper">
            <div class="weather">Weather</div>
            <div class="temperature">Temperature</div>
        </div>
        <input type="text" id="search" class="search" placeholder="Search citites here..." maxlength="20" max="20">
        <button class="btn"><i class="fa-brands fa-searchengin"></i> Search</button>
    </div>


<script>
const url = 'https://raw.githubusercontent.com/prattikk69/For-fetching-Data/refs/heads/main/weather.json';
const btn = document.querySelector('.btn');
const searchData = document.querySelector('.search');
const weather = document.querySelector('.weather');
const temperature = document.querySelector('.temperature');

// Define the function globally
function SearchData() {
    const takeValue = searchData.value.trim().toLowerCase();

    fetch(url)
        .then(res => res.json())
        .then(data => {
            const index = data.findIndex(item => item.city.toLowerCase() === takeValue);

            if (index === -1) {
                weather.textContent = "City not found";
                temperature.textContent = "City not found";
                return;
            }

            const weatherReport = data[index].weather;
            const tempReport = data[index].temperature;

            weather.textContent = `Weather: ${weatherReport}`;
            temperature.textContent = `Temperature: ${tempReport}Â°C`;
        })
        .catch(err => console.error('Error fetching data:', err));
}

// Button click
btn.addEventListener('click', SearchData);

// Enter key
document.addEventListener('keydown', (event) => {
    if(event.key === 'Enter'){
        SearchData();
    }
});
</script>

</body>
</html>